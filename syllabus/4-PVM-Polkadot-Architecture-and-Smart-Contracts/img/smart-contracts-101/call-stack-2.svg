<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200px" height="600px" viewBox="0 0 1200 600" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <title>Call types</title>
    
    <defs>
        <style>
            .contract-text {
                font-family: Helvetica, sans-serif;
                font-size: 14px;
                font-weight: bold;
                fill: #ffffff;
            }
            .code-text {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                fill: #ffffff;
            }
            .title-text {
                font-family: Helvetica, sans-serif;
                font-size: 18px;
                font-weight: bold;
                fill: #ffffff;
            }
            .stack-frame {
                fill: rgba(121, 22, 243, 0.8);
                stroke: #7916F3;
                stroke-width: 2;
            }
            .stack-frame-b {
                fill: rgba(255, 99, 132, 0.8);
                stroke: #FF6384;
                stroke-width: 2;
            }
            .eoa-style {
                fill: rgba(255, 165, 0, 0.8);
                stroke: #FF8C00;
                stroke-width: 2;
            }
            .arrow {
                fill: #ffffff;
                stroke: #ffffff;
                stroke-width: 2;
            }
            .keyword {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                font-weight: normal;
                fill: #569cd6;
            }
            .type {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                font-weight: normal;
                fill: #4ec9b0;
            }
            .function {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                font-weight: normal;
                fill: #dcdcaa;
            }
            .comment {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                font-weight: normal;
                fill: #6a9955;
                font-style: italic;
            }
            .bracket {
                font-family: 'JetBrains Mono', monospace;
                font-size: 12px;
                font-weight: normal;
                fill: #ffd700;
            }
        </style>
    </defs>

    
    <!-- Left side: Call Stack Visualization -->
    <g id="call-stack">
        <text x="150" y="70" class="title-text">Call Stack</text>
        
        <!-- EOA (Externally Owned Account) -->
        <rect x="50" y="100" width="300" height="50" rx="8" class="eoa-style"/>
        <text x="60" y="120" class="contract-text">EOA (User Wallet)</text>
        <text x="60" y="135" class="code-text">0x1234...5678</text>
        
        <!-- Contract A Stack Frame -->
        <rect x="50" y="180" width="300" height="70" rx="8" class="stack-frame" fill="rgba(121, 22, 243, 0.4)"/>
        <text x="60" y="200" class="contract-text">Contract A</text>
        <text x="60" y="215" class="code-text">0xaa...aa</text>
        <text x="60" y="230" class="code-text">Context: msg.sender = EOA</text>
        <text x="60" y="245" class="code-text">Storage: A's storage</text>
        
        <!-- Arrow from Contract A to Contract B -->
        <g class="arrow">
            <path d="M200 260 L200 290" stroke-linecap="round"/>
            <path d="M195 285 L200 290 L205 285" fill="#ffffff"/>
            <text x="220" y="275" class="function">B.b()</text>
        </g>
        
        <!-- Contract B Stack Frame (NEW) -->
        <rect x="50" y="300" width="300" height="80" rx="8" class="stack-frame"/>
        <text x="60" y="320" class="contract-text">Contract B</text>
        <text x="60" y="335" class="code-text">0xbb...bb</text>
        <text x="60" y="350" class="code-text">Context: msg.sender = Contract A</text>
        <text x="60" y="365" class="code-text">Storage: B's storage</text>
    </g>
    
    <!-- Right side: Solidity Code -->
    <g id="solidity-code">
        <text x="700" y="70" class="title-text">Call types</text>
        
        <!-- Contract B Code (currently executing) -->
        <rect x="450" y="90" width="700" height="300" rx="8" fill="rgba(121, 22, 243, 0.2)" stroke="#7916F3" stroke-width="2"/>
        <text x="470" y="125" class="title-text">abstract contract B</text>
        
        <text x="480" y="155"><tspan class="keyword">abstract contract</tspan><tspan class="code-text"> B </tspan><tspan class="bracket">{</tspan></text>
        <text x="500" y="175"><tspan class="type">uint256</tspan><tspan class="keyword"> public</tspan><tspan class="code-text"> data;</tspan></text>
        <text x="480" y="195" class="code-text"></text>
        <text x="500" y="215"><tspan class="keyword">function</tspan><tspan class="function"> b</tspan><tspan class="bracket">()</tspan><tspan class="keyword"> external</tspan><tspan class="bracket"> {</tspan></text>
        
        <!-- Highlight current execution -->
        <rect x="515" y="230" width="350" height="15" rx="2" fill="rgba(255, 255, 255, 0.3)"/>
        <text x="520" y="240"><tspan class="code-text">data = </tspan><tspan class="keyword">block</tspan><tspan class="code-text">.timestamp;</tspan></text>
        
        <text x="520" y="260" class="comment">// Function b() logic here...</text>
        <text x="520" y="280" class="comment">// Will delegate to C next...</text>
        <text x="500" y="300" class="bracket">}</text>
        <text x="480" y="320" class="bracket">}</text>
        
        <!-- Current State -->
        <rect x="450" y="420" width="700" height="120" rx="8" fill="rgba(0, 0, 0, 0.3)" stroke="#555" stroke-width="1"/>
        <text x="480" y="450" class="title-text">Current frame</text>
        <text x="480" y="475" class="code-text">• msg.sender: 0xaabb...ccdd (Contract A)</text>
        <text x="480" y="495" class="code-text">• msg.value: 0 ETH</text>
        <text x="480" y="515" class="code-text">• Storage context: Contract B (separate storage)</text>
        <text x="480" y="535" class="code-text">• Call depth: 2</text>
    </g>
    
    <!-- Bottom comment -->
    <text x="600" y="580" class="code-text" text-anchor="middle" font-style="italic" fill="#cccccc">Contract A makes normal call to Contract B.b() - separate storage contexts</text>
</svg>