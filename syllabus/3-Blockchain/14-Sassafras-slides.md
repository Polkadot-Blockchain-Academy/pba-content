---
title: Sassafras Authoring
description: Latest Module for Block Authoring on Polkadot
duration: 35min
---

## Sassafras and Semi-Anonymous Single Leader Election

TODO: Andrew combine these with the authoring slides. You have creative liberty over the authoring ones. Hack them up! If we ever wanna go back there is the git history.

---

# But..

- Wait dont we have BABE? <!-- .element: class="fragment" data-fragment-index="2" -->

---

# Why replace BABE?

- Forks are legitimate. <!-- .element: class="fragment" data-fragment-index="1" -->
- Why is forking an issue? <!-- .element: class="fragment" data-fragment-index="2" -->
- Fun Fact Babe only uses random slot assignment 25% of the time <!-- .element: class="fragment" data-fragment-index="3" -->
- Why is this an issue? <!-- .element: class="fragment" data-fragment-index="4" -->

Notes:
Is an issue because falling back on a known ahead of time schedule is vunerable to attacks

---

# Can we do better?

<pba-cols>
<pba-col>
<img style="width: 700px" src="./img/Sassafras-albidum.jpg" /><!-- .element: class="fragment" data-fragment-index="0" -->
</pba-col>
<pba-col>
Yes!! Sassafras!!<!-- .element: class="fragment" data-fragment-index="1" -->

---

# So what are our goals again?

- Reduce to no forks(Almost) <!-- .element: class="fragment" data-fragment-index="1" -->
- Make slots annonymous(Not known ahead of time) <!-- .element: class="fragment" data-fragment-index="2" -->
- Go fast be secure etc.. <!-- .element: class="fragment" data-fragment-index="3" -->

Notes:

- Does anyone know how we can still have forks no matter what?
- Why do we want that again?

---

# Re-visit

- Ring Signatures <!-- .element: class="fragment" data-fragment-index="1" -->
- VRF <!-- .element: class="fragment" data-fragment-index="2" -->
- RingVRF <!-- .element: class="fragment" data-fragment-index="3" -->

Notes:
VRF value is like a pubkey (Publicly known) and can provide
a signature or proof that you produced that random value

---

# Ring Signatures

- Recall from cryptography <!-- .element: class="fragment" data-fragment-index="1" -->
- For a group of size n we can create an annoymous signature from within that group <!-- .element: class="fragment" data-fragment-index="2" -->
- Meaning we have a valid signature but from that signature cannot identify which secret in the ring signed the message <!-- .element: class="fragment" data-fragment-index="3" -->

Notes:

- Ring signatures trade some _non-repudation_ for _privacy_.
- So what do we

---

# VRF

- For some public input seed and some secret we can produce a random output <!-- .element: class="fragment" data-fragment-index="1" -->
- We can then submit a VRF 'signature' or proof that we indeed possess the secret that generated that random output <!-- .element: class="fragment" data-fragment-index="2" -->

Notes:

VRF value is like a pubkey (Publicly known) and can provide
a signature or proof that you produced that random value

---

# RingVRF

- We combine these ideas..<!-- .element: class="fragment" data-fragment-index="1" -->
- So we have a VRF output which we generated with 'Some secret'. <!-- .element: class="fragment" data-fragment-index="2" -->
- i.e. We know that a Random output was generated by someone in the 'Ring' but we dont know who generated it. <!-- .element: class="fragment" data-fragment-index="3" -->
- We can submit a proof saying yes this was indeed us from the ring (i.e. I produced this output) <!-- .element: class="fragment" data-fragment-index="4" -->

---

# Why is a RingVRF useful?

- Answer: Allows us to know someone we know(sort of) has produced a VRFOutput but to not know who. <!-- .element: class="fragment" data-fragment-index="1" -->

Notes:
Sort of because we know that the person is in the Ring

---

# Who will the participants be in the Ring?

<pba-cols>
<pba-col>
<img style="width: 500px" src="./img/blockchain_network.png" /> <!-- .element: class="fragment" data-fragment-index="0" -->
</pba-col>
<pba-col>
Answer: Active consensus participants (Validators) <!-- .element: class="fragment" data-fragment-index="1" -->

---

# Tickets

<pba-cols>
<pba-col>
<img style="width: 500px" src="./img/party_tickets.png" /> <!-- .element: class="fragment" data-fragment-index="0" -->
</pba-col>
<pba-col>

- A Ticket for the lottery <!-- .element: class="fragment" data-fragment-index="1" -->
- Each participant creates a ticket (RingVRFOutput) <!-- .element: class="fragment" data-fragment-index="2" -->
- When should we create a ticket? <!-- .element: class="fragment" data-fragment-index="3" -->

Notes:

1. Lottery being participation in consensus!
2. Tickets should be created and submitted One epoch before the Party begins
3. Why do we want to be a person selected to participate in consensus again?

---

# Submission of tickets

<pba-cols>
<pba-col>
<img style="width: 500px" src="./img/ticket_submission.png" /> <!-- .element: class="fragment" data-fragment-index="0" -->
</pba-col>
<pba-col>

- Each Participant computes and submits their ticket on-chain <!-- .element: class="fragment" data-fragment-index="1" -->

---

## Is there a problem?

- Question: is there any issue with submitting your own ticket? <!-- .element: class="fragment" data-fragment-index="0" -->
- Answer: Annonymity broken!! <!-- .element: class="fragment" data-fragment-index="1" -->

---

### Assigning Tickets to slots

- We want to prevent someone from finding ways to manipulating randomness <!-- .element: class="fragment" data-fragment-index="0" -->
- What can happen if a bad actor can get a majority of the slots for an epoch? <!-- .element: class="fragment" data-fragment-index="1" -->

Notes: - Consecutive slots can lead to more biasability in the randomness later down the line - Consecutive slots can cause problems for the network like outages or maliciious long forks

---

# Outside in assignment

1. `[tick0, tick1, tick2, tick3,.. tickN]` <!-- .element: class="fragment" data-fragment-index="0" -->
1. `[tick1, tick3, .., tick2, tick0]` <!-- .element: class="fragment" data-fragment-index="1" -->

Notes:

1. How does this help?
2. Answer: If you have found a way to get consecutive tickets then it breaks up the consecutive tickets

---

## Claim a slot

- Question: Now that slot x is up for grabs how do we prove that it is ours? <!-- .element: class="fragment" data-fragment-index="0" -->
- Answer: Submit our unique VRF Signature/Proof <!-- .element: class="fragment" data-fragment-index="1" -->
- Produce the block!! <!-- .element: class="fragment" data-fragment-index="2" -->

---

# Summary

1. Produce RingVRFoutput(Ticket) one epoch before <!-- .element: class="fragment" data-fragment-index="0" -->
1. Send to a friend <!-- .element: class="fragment" data-fragment-index="1" -->
1. They post on chain <!-- .element: class="fragment" data-fragment-index="2" -->
1. Outputs get assigned to slots randomly(psuedo) <!-- .element: class="fragment" data-fragment-index="3" -->
1. When it is your turn submit VRF signature(proof) <!-- .element: class="fragment" data-fragment-index="4" -->
1. Build your block and get rewards! <!-- .element: class="fragment" data-fragment-index="5" -->

---
