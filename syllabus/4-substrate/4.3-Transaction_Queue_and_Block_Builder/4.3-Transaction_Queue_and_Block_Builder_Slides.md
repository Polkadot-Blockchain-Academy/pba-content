## Transaction Queue and Block Builder

Lecture 3, Module 4

Instructors: Shawn Tabrizi

---- 

In this lecture you will learn about the behaviour of the transaction queue in Substrate at higher level (e.g. when interacting with a chain).

---

## Context

<div class="left">

* The networking layer in Substrate gives transactions to the transaction pool.
* A gossip protocol propagates transactions to other network participants.

</div>

<div class="right">

```
┌───────────┐                                                    ┌───────────────┐
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │   ┌───────────────┐       ┌────────────────┐       │               │
│           │   │               │       │                │       │               │
│           │   │               │       │                │       │               │
│  network  │   │    Tx-pool    │       │  Block-Builder │       │     Runtime   │
│           ├───►               ├───────►                ├───────►               │
│           │   │               │       │                │       │               │
│           │   └───────────────┘       └────────────────┘       │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
│           │                                                    │               │
└───────────┘                                                    └───────────────┘
```
</div>

Note: https://substrate.stackexchange.com/questions/2148/transactions-lifecycle/2272#2272
TODO: diagram of "inputs" being network/consensus and outer world and "outputs" being block builder.

---

The pool does a few things:
* It (re)validates transactions when needed, handling:
    * Transaction mortality
    * Priority
    * Banning
* It provides transaction submission and status updates via RPC.

---

## Transaction priority 

An extrinsic contains special fields that help the pool determine how to order transactions by priority:

* Provides
* Requires

---
## A Generic Transaction Pool

Every blockchain has a transaction pool, however Substrate's is unique in that it makes very little assumptions about what kind of content is in that pool.

TODO: what's unique in Substrate's

---

## Components of the Transaction Pool

At a high level, the Transaction Pool only cares about:

- Provides
- Requires
- Priority
- Validity Function

---
## Transaction validation

How are transactions

---

## Transaction priority

---

## Exercises

Investigate Blocks and Transactions on Polkadot Network

* Find some notable blocks in Polkadot, and lets discuss them and their contents.
* Work with Subscan / Polkadot JS, and other tools

---

TODO Revisit the lesson
