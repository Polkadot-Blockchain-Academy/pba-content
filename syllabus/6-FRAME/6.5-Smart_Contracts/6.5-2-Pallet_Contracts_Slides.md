---
title: pallet-contracts # Also update the h1 header on the first slide to the same name
description: Describe your slides here
duration: 1 hour
instructors: ["some one", "another gal"]
teaching-assistants: ["some one", "another gal"]
revealOptions:
    transition: "slide"
---

# `pallet-contracts`

## _Module 6, Lecture 5.2_

---

<div class="flex-container">
<div class="left text-right"> <!-- Gotcha: You Need an empty line to render MD inside <div> -->

<!-- TODO: add a good circularly cropped headshot of ou to the `assets/profile` folder  -->
<img style="width: 550px; float:right; margin-right:30px" src="../../../assets/img/0-Shared/profile.png"/>

</div>
<div style="margin-top:130px" class="right text-left"> <!-- Gotcha: You Need an empty line to render MD inside <div> -->

### Alexander Thei√üen

<!-- .element: style="margin-bottom: -30px;" -->

#### _Core Developer @ Parity Technologies_

<!-- .element: style="margin-left: 20px;" -->

- With Parity since early 2020
- Leads the smart contract execution team
- Works on pallet-contracts

[Github](https://github.com/athei) // [LinkedIn](https://www.linkedin.com/in/athei/)

</div>
</div>

---

### Outline

<!--
You can reference slides within this presentation like [this other slide](#at-the-end-of-this-lecture-you-will-be-able-to) by use of the header title.

Please make your lecture precise.

- Limit the main points in a lecture to five or fewer.
- Create effective visuals, analogies, demonstrations, and examples to reinforce the main points.
  {TAs and the Parity design team can assist! Please let us know marking an item here as `TODO`}
- Emphasize your objectives and key points in the beginning, as you get to them, and as a summary at the end.

-->

1. [Pre-requisites](#pre-requisites)
1. [Architecture of pallet-contracts]()
1. [Contract Execution]()
1. [Exercise: Your first contract]()
1. [Fixing Storage Bloat]()
1. [Contracts on parachains]()
1. [Conclusion](#conclusion)
1. [Next Steps](#next-steps)
1. [References](#references)

---

## Pre-requisites

No background in X is necessary. However, the following are expected:

- Y
- Z
- \\(\alpha\\)

---v

### _At the end of this lecture, you will be able to:_

<!-- TODO: fill this in  -->

- Describe ...
- Navigate ...
- Justify ...

---v

## Architecture of pallet-contracts

- Connect to what Ricardo did say:
  - "If you want run a contract this is how you do it. Yuu need something that runs the contract".
- gas = weight
- Go through dispatchables
- RPCs that mirror those for dry-runs
- Configuration trait
- API definition
  - Extenable by chain extensions

Notes:
Speaker view ONLY notes

---

## Contract Execution

- WebAssembly primer (assume they didn't hear about it)
  - Create the primer and share with kian and shawn
- Interpreter vs. compiler
- Why size matters:
  - Needs to be compiled
  - Interpreters are dominated by #instructions
- Embedded executor vs. host executor
- Gas metering strategies
  - Show a full contract with gas metering
  - Be interactive: Go through the contract "ask what does this part do? (its gas metering)?"
  - Make it like an exercise

Notes:
Speaker view ONLY notes

---

## Exercise: Your first contract

- Mentioned wasm2wat <-> wat2wasm tooling
- Write a very basic contract in wat
- Provide skelleton: Users write code to read input, do addition and write to storage

### _Describe it here_

<!-- TODO: exercise indicator https://github.com/paritytech/polkadot-blockchain-academy/issues/67 -->

---v

### Exercise instructions

<!--
Detail what you want students to do in your exercise
Most exercises are less than 15 minuets in length.
-->

1.
1.
1.

Notes:
Make sure to include things here to say to students, perhaps a hint or two.
Realize that students will be able to view the speaker's notes, as they will have access to them on their devices.

<!-- TODO: exercise indicator https://github.com/paritytech/polkadot-blockchain-academy/issues/67 -->

---

## Fixing Storage Bloat

- Motivate problem with EVM as example
- Describe how we initially tried to fix it (storage rent)
- Why we switched to a new model
- Describe new model

Notes:
Speaker view ONLY notes

---

## Contracts on parachains

- Tell it as a story:
  - We started the pallet before parachains
  - Parachains are sharded and that introduced challenged for us
  - Ask if they know why this could be problem?
  - No other sharded contracts solutions
  - Motivate people that are things for them to figure out
- Describe basic parachain protocol
- Say why this is a challenge for contracts (they are part of the witness)
- What we did to improve
- Future steps to improve the situation

Notes:
Speaker view ONLY notes

## Conclusion

<!-- Summarize what we just learned, and put it in the bigger picture of what the Academy and Web3 are all about. -->

---

## Next steps

<!--
Compile a list of:
- topics not covered here but students should consider learning about independently
- examples of the concepts covered in this lesson applied to a project, to case-study
- useful resources related to the lesson

- Reference other slides/materials by relative directory in this repo, like the [copy-paste slide templates](../../content-templates/slides/copy-paste-reveal-template-slides.md)
-->

1. <!-- TODO: fill this in  -->
1. <!-- TODO: fill this in  -->
1. <!-- TODO: fill this in  -->

---

## References

<!--
Compile an **annotated** list of URLs to source material referenced in making these lessons.
Ideally this is exhaustive, it can be cleaned up before delivery to students, but must include _why_ a reference is used.
For example:

- [ss58-registry](https://github.com/paritytech/ss58-registry) - A list of known SS58 account types as an enum, typically used by the Polkadot, Kusama or Substrate ecosystems.
- [wiki on parathreads](https://wiki.polkadot.network/docs/learn-parathreads) - A description of the parathread model.
-->
